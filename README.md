# 图像处理工具

这是一个简单的图像处理应用程序，具有基本的图像编辑功能，可以打包成Windows可执行文件。

## 功能特性

- 打开多种格式的图像文件（JPG, PNG, BMP, GIF, TIFF等）
- 批量导入图像（可一次性选择多张图片）
- 导入整个文件夹中的图像
- **拖拽导入图像**（支持将图像文件拖拽到程序窗口中）
- 在界面上显示已导入图片的列表（文件名）
- 调整图像亮度和对比度
- 应用滤镜效果（模糊、边缘增强、锐化）
- 转换为灰度图像
- 重置图像修改
- 保存处理后的图像
- **导出设置功能**：
  - 防止覆盖原图（默认导出到原文件夹的export子目录）
  - 自定义导出文件命名规则（保留原文件名、添加前缀、添加后缀）
  - JPEG质量调节滑块（1-100）
  - 导出格式选择（保持原格式、JPEG、PNG）
  - 自定义导出目录
  - 可滚动的导出设置界面

## 使用方法

### 方法一：直接运行Python脚本

1. 确保已安装Python 3.6或更高版本
2. 安装依赖：
   ```
   pip install -r requirements.txt
   ```
3. 运行程序：
   ```
   python image_processor.py
   ```

### 方法二：使用批处理脚本运行

双击运行 `run.bat` 文件，它会自动安装依赖并运行程序。

### 方法三：使用预编译的可执行文件（推荐）

1. 下载发布版本的ZIP文件（如：图像处理工具_v20251005_162528.zip）
2. 解压ZIP文件
3. 双击"启动图像处理工具.bat"或"image_processor.exe"运行程序

## 图像导入方式

1. **单张图片导入**：
   - 点击"打开图像"按钮或使用菜单中的"文件"->"打开图像"选项
   - 选择一个或多个图像文件

2. **批量导入**：
   - 点击"批量导入"按钮或使用菜单中的"文件"->"批量导入"选项
   - 选择多个图像文件

3. **文件夹导入**：
   - 点击"导入文件夹"按钮或使用菜单中的"文件"->"导入文件夹"选项
   - 选择包含图像文件的文件夹

4. **拖拽导入**：
   - 将图像文件直接拖拽到程序窗口的图像显示区域
   - 支持同时拖拽多个文件
   - 支持拖拽整个文件夹

## 图像列表管理

- 所有导入的图像都会显示在左侧的图像列表中
- 点击列表中的任意图像即可切换到该图像进行处理
- 图像信息会显示在列表下方的状态区域

## 图像处理功能

- **亮度调整**：使用"亮度"滑块调整图像亮度
- **对比度调整**：使用"对比度"滑块调整图像对比度
- **滤镜效果**：
  - 模糊：应用模糊滤镜
  - 边缘增强：增强图像边缘
  - 锐化：锐化图像细节
  - 灰度化：将图像转换为灰度图
- **重置**：恢复到原始图像状态

## 图像导出功能

点击"保存图像"按钮或使用菜单中的"文件"->"保存"选项，将打开导出设置对话框：

1. **文件命名规则**：
   - 保留原文件名：导出文件与原文件同名
   - 添加前缀：在原文件名前添加自定义前缀（如"wm_"）
   - 添加后缀：在原文件名后添加自定义后缀（如"_watermarked"）

2. **导出格式选择**：
   - 保持原格式：保持与原文件相同的格式
   - JPEG：转换为JPEG格式（可调节质量）
   - PNG：转换为PNG格式（无损）

3. **JPEG质量调节**：
   - 当选择JPEG格式时，可使用滑块调节图像质量（1-100）
   - 数值越高，质量越好，文件越大
   - 仅对JPEG格式有效，选择PNG格式时不显示此选项

4. **导出目录设置**：
   - 防止覆盖原文件：默认将导出文件保存到原文件夹的"export"子目录中
   - 自定义导出目录：可以指定任意目录作为导出位置
   - 浏览按钮：通过文件选择器选择导出目录

5. **导出操作**：
   - 导出：按照设置的规则导出图像
   - 另存为：使用系统文件保存对话框指定导出位置和文件名
   - 取消：取消导出操作

6. **界面特性**：
   - 可调整大小的导出设置窗口
   - 支持鼠标滚轮滚动查看所有设置选项
   - 自动适应不同屏幕尺寸

## 构建Windows可执行文件

### 自动构建

双击运行 `build.bat` 文件，它会自动安装依赖并构建Windows可执行文件。

构建完成后，可执行文件将位于 `build` 文件夹中。

### 手动构建

1. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

2. 运行构建命令：
   ```
   python build_exe.py build
   ```

3. 构建完成后，可执行文件将位于 `build` 文件夹中。

## 创建发布版本

运行以下命令创建可分发的发布版本：
```
python create_release.py
```

这将创建一个包含所有必要文件的ZIP压缩包，用户可以直接解压并运行。

## 系统要求

- Windows 7或更高版本
- Python 3.6或更高版本（仅在运行源代码时需要）

## 依赖项

- Pillow: Python图像处理库
- cx_Freeze: 用于将Python脚本打包成可执行文件
- tkinterdnd2: 用于支持Windows下的文件拖拽功能

## 许可证

此项目为开源软件，可用于任何目的。